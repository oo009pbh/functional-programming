![[Pasted image 20240524220358.png]]


*ì•„ëž˜ì—ì„œ ì‚¬ìš©ë  í•¨ìˆ˜(go, curry...)ë“¤ì€ ì´ì „ í¬ìŠ¤íŠ¸ë“¤ì—ì„œ ì„¤ëª…ë˜ì–´ ìžˆìŠµë‹ˆë‹¤.

## ðŸ“—ì§€ì—°ì„±ì´ ì´ë£¨ê³ ìž í•˜ëŠ” ëª©í‘œ

ì§€ê¸ˆê¹Œì§€ì˜ ì½”ë“œë¥¼ ë°”íƒ•ìœ¼ë¡œ ì•„ëž˜ì™€ ê°™ì€ ì½”ë“œê°€ ì‹¤í–‰ëœë‹¤ê³  ìƒê°í•´ë³´ìž.

```js
 go(
    range(100000),
    take(5),
    reduce(add),
    log);
```

ìš°ì„  `range` í•¨ìˆ˜ë¥¼ í†µí•´ 10ë§Œê°œì˜ `index`ë¥¼ ê°€ì§„ ë°°ì—´ì´ ìƒì„±ë˜ê³  ê·¸ ì¤‘ 5ê°œë¥¼ `take` í•˜ì—¬ `reduce`ë¡œ ë”í•˜ëŠ” í•¨ìˆ˜ìž„ì„ ì•Œ ìˆ˜ ìžˆë‹¤.

ë¬¸ì œê°€ ì—†ì–´ ë³´ì´ì§€ë§Œ, 10ë§Œê°œì˜ indexì¤‘ ë‹¨ 5ê°œë§Œì„ ì‚¬ìš©í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ì‚¬ìš©ë˜ì§€ ì•Šì€ ìƒíƒœì—¬ì„œ 
ë‚˜ë¨¸ì§€ 99995ê°œì˜ ë°°ì—´ ì¸ë±ìŠ¤ì— ê°’ì´ í‰ê°€ëœ ê²ƒì€ ì‹¤ì œë¡œ ì“¸ëª¨ì—†ëŠ” ì¼ì´ ë˜ì—ˆë‹¤.

í•˜ì§€ë§Œ, ì›¹ì—ì„œ ëŒì•„ê°€ëŠ” jsì˜ íŠ¹ì„±ìƒ ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„  10ë§Œê°œì˜ `index`ì¤‘ 5ê°œë¥¼ take í• ì§€ 10ë§Œê°œ ì „ë¶€ë¥¼ take í• ì§€ëŠ” ì‚¬ìš©ìžì— ì•¡ì…˜ì— ë”°ë¼ ë‹¬ë¼ì§€ê¸° ë•Œë¬¸ì— ì´ê±´ ì–´ì©” ìˆ˜ ì—†ëŠ” ë¶€ë¶„ì´ ì•„ë‹ˆëƒê³  ìƒê° í•  ìˆ˜ ìžˆë‹¤.

> ë§Œì•½, **ì‚¬ìš©í•˜ëŠ” ê°’ë§Œ í‰ê°€**í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤ë©´?

í•¨ìˆ˜í˜• í”„ë¡œê·¸ëž˜ë°ì˜ ì§€ì—°ì„±ì€ ìœ„ì˜ ì•„ì´ë””ì–´ì—ì„œ ì‹œìž‘í•œë‹¤.

## ðŸ“—range ì™€ L.range

L.rangeëŠ” 'ëŠê¸‹í•œ' ì´ë¼ëŠ” ë§ì´ ë¶™ëŠ” range í•¨ìˆ˜ì´ë‹¤.
ì—¬ê¸°ì„œì˜ ëŠê¸‹í•œì€ 'í•¨ìˆ˜ ë‚´ë¶€ì˜ ì‹¤í–‰ì„ ìˆœíšŒ ë‹¹ì‹œ ìˆœì„œë¡œ ë¯¸ë£¸' ì´ë¼ëŠ” ë§ì— ì¢€ ë” ê°€ê¹ë‹¤. 

ì•„ëž˜ì˜ í•¨ìˆ˜ë“¤ì„ ë´ë³´ìž

```js
const range = l => {
	let i = -1;
	let res = [];
	while (++i < l) {
	  res.push(i);
	}
	return res;
};

L.range = function* (l) {
    let i = -1;
    while (++i < l) {
      yield i;
    }
};
```

`range`ëŠ” `l` ë§Œí¼ì˜ `index`ë¥¼ ê°€ì§„ ë°°ì—´ì„ **ë°”ë¡œ í‰ê°€í•˜ì—¬ ë¦¬í„´**í•œë‹¤.
`L.range`ëŠ” `l` ê¹Œì§€ ìˆœíšŒí•˜ëŠ” **ì´í„°ë ˆì´í„°**ë¥¼ ë¦¬í„´í•œë‹¤.

ë‘˜ì˜ ì°¨ì´ëŠ” **ê°’ì´ í‰ê°€ë˜ëŠ” ì‹œì **ì— ìžˆë‹¤.

ì•„ëž˜ì™€ ê°™ì´ ê¸°ì¡´ `range`ëŠ” `while`ì˜ ì‹¤í–‰ì´ ë‹¤ ëë‚œ ì´í›„ `return`ì´ ë˜ê¸° ë•Œë¬¸ì— ì–´ì©Œë©´ ë‹¹ì—°í•˜ê²Œ ì½˜ì†”ì´ 1000ë²ˆì´ ì°íž ê²ƒìœ¼ë¡œ ì˜ˆìƒí•  ê²ƒì´ë‹¤.

```js
const range = l => {
	let i = -1;
	let res = [];
	while (++i < l) {
	  res.push(i);
	  console.log(i);
	}
	return res;
};

var list = range(1000);// 1000ë²ˆì˜ ì½˜ì†”ì´ ì°íž ê²ƒì´ë‹¤.
log(list); // [0, 1, 2 .... , 999]
```


í•˜ì§€ë§Œ ì•„ëž˜ ì´í„°ë ˆì´í„°ëŠ” **ìˆœíšŒ ì‹œì **ì— ê°’ì´ í‰ê°€ê°€ ëœë‹¤.

```js
L.range = function* (l) {
    let i = -1;
    while (++i < l) {
		console.log(i);
	    yield i;
    }
};

var list = L.range(1000); // ì•„ë¬´ ì½˜ì†”ë„ ì°ížˆì§€ ì•ŠëŠ”ë‹¤.
console.log(list); // Object [Generator] {}
list.next(); // 0
list.next(); // 1
list.next(); // 2
list.next(); // 3
```

ê·¸ë ‡ë‹¤ë©´ ì´ ì§€ì—°ì„±ì„ ê°€ì§„ í•¨ìˆ˜ëŠ” ì–´ë–¤ ì´ì ì´ ìžˆì„ê¹Œ.

ë§¨ ì²˜ìŒ ì‹¤í–‰í–ˆë˜ í•¨ìˆ˜ë¥¼ L.rangeë¡œ ë°”ê¾¸ì–´ë³´ê³  ê±¸ë¦¬ëŠ” ì‹œê°„ì„ ë¹„êµí•´ë³´

```js
console.time('');  
go(  
  range(10000),  
  take(5),  
  reduce(add),  
  log);  
console.timeEnd('');  
  
console.time('');  
go(  
  L.range(10000),  
  take(5),  
  reduce(add),  
  log);  
console.timeEnd('');
```

![[Pasted image 20240524232306.png]]

ê½¤ ë‚˜ í° ì°¨ì´ê°€ ë‚˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìžˆë‹¤.

## ðŸ“—ì´í„°ëŸ¬ë¸” ì¤‘ì‹¬ í”„ë¡œê·¸ëž˜ë°ì—ì„œì˜ ì§€ì—° í‰ê°€ (Lazy Evaluation)

ì§€ì—°í‰ê°€ëŠ” ì•„ëž˜ì™€ ê°™ íŠ¹ì„±ì´ ìžˆë‹¤.
- ì œë•Œ ê³„ì‚°ë²•
- ëŠê¸‹í•œ ê³„ì‚°ë²•
- ì œë„ˆë ˆì´í„°/ì´í„°ë ˆì´í„° í”„ë¡œí† ì½œì„ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„

## ðŸ“—mapê³¼ filterì—ë„ ì ìš©í•´ë³´ìž 

```js

L.map = curry(function* (f, iter) {
    iter = iter[Symbol.iterator]();
    let cur;
    while (!(cur = iter.next()).done) {
      const a = cur.value;
      yield f(a);
    }
  });

L.filter = curry(function* (f, iter) {
	iter = iter[Symbol.iterator]();
    let cur;
    while (!(cur = iter.next()).done) {
      const a = cur.value;
      if (f(a)) {
        yield a;
      }
    }
});
```

